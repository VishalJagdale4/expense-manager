<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search Box with API Suggestions</title>
    <style>
        body {
          font-family: Arial, sans-serif;
          padding: 20px;
        }
        #searchBox {
          width: 300px;
          padding: 8px;
          font-size: 16px;
        }
        #suggestions {
          border: 1px solid #ccc;
          max-width: 300px;
          margin-top: 2px;
          border-radius: 4px;
          position: absolute;
          background: white;
          z-index: 1000;
        }
        #suggestions div {
          padding: 8px;
          cursor: pointer;
        }
        #suggestions div:hover {
          background-color: #f0f0f0;
        }
    </style>
</head>
<body>

<h2>Transaction Notes Search</h2>
<input type="text" id="searchBox" placeholder="Type a note..." autocomplete="off">
<div id="suggestions"></div>

<script>
    const searchBox = document.getElementById('searchBox');
    const suggestionsBox = document.getElementById('suggestions');

    searchBox.addEventListener('input', async () => {
        const query = searchBox.value.trim();

        // Clear suggestions if input is empty
        if (!query) {
            suggestionsBox.innerHTML = '';
            return;
        }

        try {
            // Call your API
            const response = await fetch('http://localhost:8101/expense-svc/transaction/getTransactionNotes', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ noteLike: query })
            });

            const data = await response.json();

            // Display suggestions
            suggestionsBox.innerHTML = '';
            if (data.data && data.data.length > 0) {
                data.data.forEach(item => {
                    const div = document.createElement('div');
                    div.textContent = item;
                    div.addEventListener('click', () => {
                        searchBox.value = item;
                        suggestionsBox.innerHTML = '';
                    });
                    suggestionsBox.appendChild(div);
                });
            }
        } catch (err) {
            console.error('Error fetching suggestions:', err);
        }
    });
</script>

</body>
</html>
